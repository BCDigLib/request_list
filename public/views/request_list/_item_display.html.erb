<% @item_count ||= 0; @item_count += 1 %>
<% is_resource = item.type == Resource %>

<div class="rl-item-display">

<%= render partial: 'request_list/remove_from_list_button', locals: {:uri => item.uri } %>

<table class="rl-item-table">
  <tr>
    <td rowspan="<%= is_resource ? 3 : 4 %>" width="40px">
      <h3><%= @item_count %></h3>
    </td>

    <% unless is_resource %>
      <td width="1%">
        Record:
      </td>
      <td class="rl-display rl-display-record">
        <span class="rl-display-title">
          <a href="<%= app_prefix(item.record.uri) %>">  <%= item.record.id + ': ' unless item.record.id.empty? %><%= item.record.name %></a>
        </span>
        <%= ('(' + item.extent.name + ')') unless item.extent.name.empty? %>
      </td>
  </tr>

  <tr>
    <% end %>
    <td width="1%">
      Collection:
    </td>
    <td class="rl-display rl-display-collection <%= is_resource ? 'rl-display-title' : ''  %>">
      <a href="<%= app_prefix(item.collection.uri) %>">  <%= item.collection.id %>: <%= item.collection.name %></a>
      <% item.collection.multi.drop(1).map do |c| %>
        >> <a href="<%= app_prefix(c.uri) %>">  <%= c.name %></a>
      <% end %>
      <%= ('(' + item.extent.name + ')') if is_resource && !item.extent.name.empty? %>
    </td>
  </tr>

  <tr>
    <td>
      Repository:
    </td>
    <td class="rl-display rl-display-repository">
      <a href="<%= app_prefix(item.repository.uri) %>">  <%= item.repository.name %></a>
    </td>
  </tr>

  <tr>
    <td>
    </td>

    <td class="rl-display rl-display-container">
      <div class="rl-display-container-pane">
        <% item.container.multi.map do |container| %>
          <div class="rl-display-container-cell">
            <i class="fa fa-archive"></i>
            <a href="<%= app_prefix(container.uri) %>">  <%= container.name %></a>
            <%= ('(' + container.ext(:subs) + ')') unless container.ext(:subs).empty? %>
          </div>
        <% end %>
      </div>
    </td>

  </tr>

</table>

<%= render partial: 'request_list/expand_item_button', locals: {:item => item } %>

</div>
